<html>
<body>
	
	
	<script type="text/javascript" src="https://service.force.com/embeddedservice/5.0/esw.min.js"></script>
  <script type="text/javascript">
    var initESW = function (gslbBaseURL) {
      embedded_svc.settings.displayHelpButton = true; //Or false
      embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'

      //embedded_svc.settings.defaultMinimizedText = '...'; //(Defaults to Chat with an Expert)
      //embedded_svc.settings.disabledMinimizedText = '...'; //(Defaults to Agent Offline)

      //embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
      embedded_svc.settings.storageDomain =
        'skyboxoffice.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)

      // Settings for Live Agent
      //embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
      // Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
      // Returns a valid button ID.
      //};
      //embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields
      //embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
      //embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)

      embedded_svc.settings.chatbotAvatarImgURL = '/resources/icons/chat-icon.png';
      embedded_svc.settings.enabledFeatures = ['LiveAgent'];
      embedded_svc.settings.entryFeature = 'LiveAgent';

      embedded_svc.settings.extraPrechatInfo = [{
          entityName: 'Case',
          showOnCreate: true,
          saveToTranscript: 'CaseId',
          entityFieldMaps: [{
              fieldName: 'Origin',
              label: 'Origin',
              doFind: false,
              isExactMatch: false,
              doCreate: true
            },
            {
              fieldName: 'Subject',
              label: 'Subject',
              doFind: false,
              isExactMatch: false,
              doCreate: true
            },
            {
              fieldName: 'Type',
              label: 'Case Type',
              doFind: false,
              isExactMatch: false,
              doCreate: true
            },
            {
              fieldName: 'Profile_ID__c',
              label: 'Profile Id',
              doFind: false,
              isExactMatch: false,
              doCreate: true
            },
            {
              fieldName: 'Logged_In_Status__c',
              label: 'Logged In',
              doFind: false,
              isExactMatch: false,
              doCreate: true
            }
          ]
        },
        {
          entityName: 'Contact',
          showOnCreate: true,
          saveToTranscript: 'ContactId',
          entityFieldMaps: [{
            fieldName: 'Contact_Id__c',
            label: 'Contact Id',
            doFind: true,
            isExactMatch: true,
            doCreate: false
          }],
          linkToEntityName: 'Case',
          linkToEntityField: 'ContactId'
        }
      ];

      embedded_svc.settings.extraPrechatFormDetails = [{
          label: 'Origin',
          value: 'LiveAgent',
          transcriptFields: [],
          displayToAgent: true,
          name: 'Origin'
        },
        {
          label: 'Subject',
          value: 'Customer chat',
          transcriptFields: [],
          displayToAgent: true,
          name: 'Subject'
        },
        {
          label: 'Case Type',
          value: 'Question',
          transcriptFields: [],
          displayToAgent: true,
          name: 'Type'
        },
        {
          label: 'Profile Id',
          value: '',
          transcriptFields: [],
          displayToAgent: true,
          name: 'Profile_ID__c'
        },
        {
          label: 'Contact Id',
          value: '',
          transcriptFields: [],
          displayToAgent: true,
          name: 'Contact_Id__c'
        },
        {
          label: 'Logged In',
          value: 'false',
          transcriptFields: [],
          displayToAgent: true,
          name: 'Logged_In_Status__c'
        }
      ];

      embedded_svc.init(
        'https://ppv--quality.my.salesforce.com',
        'https://quality-ppv.cs101.force.com/',
        gslbBaseURL,
        '00D1X0000008hL5',
        'PPV', {
          baseLiveAgentContentURL: 'https://c.la1-c1cs-fra.salesforceliveagent.com/content',
          deploymentId: '5721t000000CooW',
          buttonId: '5731t000000CpIt',
          baseLiveAgentURL: 'https://d.la1-c1cs-fra.salesforceliveagent.com/chat',
          eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I1t000000XbRKEA0_16871817c91',
          isOfflineSupportEnabled: false
        }
      );
    };

    if (!window.embedded_svc) {
      var s = document.createElement('script');
      s.setAttribute('src', 'https://ppv--quality.my.salesforce.com/embeddedservice/5.0/esw.min.js');
      s.onload = function () {
        initESW(null);
      };
      document.body.appendChild(s);
    } else {
      initESW('https://service.force.com');
    }
  </script>



</body>
</html>
